# 그로스코어 최적화 계정 조회

## 📌 API 개요

- **언어**: 일본어 전용
- **인증**: API Key 방식
- **응답 형식**: JSON

---

## 🔑 인증

API 호출 시 `X-Auth-Key` 헤더에 발급받은 API Key를 포함해야 합니다.

```http
X-Auth-Key: your_api_key_here
```

---

## 📡 API 엔드포인트

### 계정 분석 조회

**Endpoint**
```
GET /api/thirdparty/id-analytics
```

**요청 파라미터**

| 파라미터 | 타입 | 필수 | 설명 |
|---------|------|------|------|
| id | string | ✅ | 분석할 Instagram 계정명 (username) |

**요청 헤더**

| 헤더 | 타입 | 필수 | 설명 |
|------|------|------|------|
| X-Auth-Key | string | ✅ | API 인증 키 |

---

## 📤 요청 예시

### cURL
```bash
curl -X GET "https://api.growthcore.co.kr/api/thirdparty/id-analytics?id=dmaaktdltrptek" \
  -H "X-Auth-Key: your_api_key_here"
```

### Python
```python
import requests

url = "https://api.growthcore.co.kr/api/thirdparty/id-analytics"
headers = {
    "X-Auth-Key": "your_api_key_here"
}
params = {
    "id": "dmaaktdltrptek"
}

response = requests.get(url, headers=headers, params=params)
data = response.json()
print(data)
```

### JavaScript (fetch)
```javascript
const url = 'https://api.growthcore.co.kr/api/thirdparty/id-analytics?id=dmaaktdltrptek';

fetch(url, {
  method: 'GET',
  headers: {
    'X-Auth-Key': 'your_api_key_here'
  }
})
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error('Error:', error));
```

### JavaScript (axios)
```javascript
const axios = require('axios');

const config = {
  method: 'get',
  url: 'https://api.growthcore.co.kr/api/thirdparty/id-analytics',
  headers: {
    'X-Auth-Key': 'your_api_key_here'
  },
  params: {
    id: 'dmaaktdltrptek'
  }
};

axios(config)
  .then(response => {
    console.log(JSON.stringify(response.data));
  })
  .catch(error => {
    console.log(error);
  });
```

---

## 📥 응답 예시

### 성공 응답 (200 OK)

```json
{
  "result": {
    "follower_count": 4224,
    "follow_count": 208,
    "post_count": 86,
    "username": "dmaaktdltrptek",
    "full_name": "인스타그램 초보",
    "biography": "",
    "average_like_count": 50,
    "average_comment_count": 1,
    "average_post_hour": 636.02,
    "recent_hashtag_list": [
      {
        "hashtag": "먹스타그램",
        "count": 2
      },
      {
        "hashtag": "여긴",
        "count": 1
      }
    ],
    "growthcore_customer": {
      "is_callable": true,
      "message": ""
    },
    "profile_image_url": "https://growthcore-resource-bucket.s3.ap-northeast-2.amazonaws.com/profile_thumbnail/dmaaktdltrptek_85632548f07b0cef3439d65fb8603b63.jpg",
    "follower_grade": "C",
    "post_count_grade": "充分",
    "activity_grade": "不足",
    "post_type": "PHOTO",
    "photo_rate": 39.13,
    "reels_rate": 52.17,
    "carousel_rate": 8.7,
    "total_grade": "C",
    "analytics_message": "投稿数は多いものの、最近投稿が少なく露出が下がっている可能性があります。\n週3回以上の投稿を目安に、更新頻度を上げていきましょう。",
    "recommend_service_message": [
      "写真中心のフィード構成です。\n「投稿上位露出サービス」を活用して、おすすめタブの目立つ位置に表示させ、潜在的なお客様の流入を拡大しましょう。即日の露出をご希望の方には、リポスト露出サービスもご用意しています。",
      "投稿数は十分ですが、活動頻度やフォロワー数が不足している状態です。\nまずはフォロワーを5,000人以上に増やすことで、インスタグラムからの評価アップや検索結果の上位表示、発見タブでの露出機会がさらに増えます。"
    ]
  },
  "status": "success"
}
```

---

## 📊 응답 필드 설명

### 기본 계정 정보

| 필드 | 타입 | 설명 |
|------|------|------|
| username | string | Instagram 계정명 |
| full_name | string | 계정 이름 |
| biography | string | 계정 소개글 |
| profile_image_url | string | 프로필 이미지 URL |
| follower_count | integer | 팔로워 수 |
| follow_count | integer | 팔로잉 수 |
| post_count | integer | 게시물 수 |

### 활동 통계

| 필드 | 타입 | 설명 |
|------|------|------|
| average_like_count | integer | 최근 12개 게시물의 평균 좋아요 수 |
| average_comment_count | integer | 최근 12개 게시물의 평균 댓글 수 |
| average_post_hour | float | 평균 게시 간격 (시간 단위) |
| recent_hashtag_list | array | 최근 사용한 해시태그 목록 |
| recent_hashtag_list[].hashtag | string | 해시태그 |
| recent_hashtag_list[].count | integer | 사용 횟수 |

### 최종 등급 처리

| 필드 | 타입 | 가능한 값 | 설명 |
|------|------|-----------|------|
| follower_grade | string | S, A, B, C, D | 팔로워 수 기반 등급<br>• S: 30,000명 이상<br>• A: 10,000명 이상<br>• B: 5,000명 이상<br>• C: 3,000명 이상<br>• D: 3,000명 미만 |
| post_count_grade | string | 充分, 不足 | 게시물 수 충분도<br>• 充分(충분): 조건 충족<br>• 不足(부족): 게시물 수 부족 |
| activity_grade | string | 充分, やや不足, 不足, とても不足 | 최근 활동량 평가<br>• 充分(충분): 20개 이상<br>• やや不足(다소 부족): 12개 이상<br>• 不足(부족): 1개 이상<br>• とても不足(매우 부족): 0개 |
| total_grade | string | S, A, B, C, D | 종합 등급 (팔로워+게시물+활동량 기반) |

### 게시물별 비율

| 필드 | 타입 | 가능한 값 | 설명 |
|------|------|-----------|------|
| post_type | string | PHOTO, REELS, ALL, NONE | 주요 게시물 유형<br>• PHOTO: 사진 중심<br>• REELS: 릴스 중심<br>• ALL: 혼합<br>• NONE: 미분류 |
| photo_rate | float | 0.0 ~ 100.0 | 사진 게시물 비율 (%) |
| reels_rate | float | 0.0 ~ 100.0 | 릴스 게시물 비율 (%) |
| carousel_rate | float | 0.0 ~ 100.0 | 캐러셀(다중 이미지) 게시물 비율 (%) |

### 계정 진단 구성

| 필드 | 타입 | 설명 |
|------|------|------|
| analytics_message | string | 계정 상태 분석 메시지 (일본어) |
| recommend_service_message | array<string> | 추천 서비스 메시지 목록 (일본어)<br>• 자동 활동 슬롯 추천<br>• 게시물 상위 노출 추천<br>• 계정탭 상위 노출 추천<br>• 팔로워 증가 추천 |

---

## ⚠️ 에러 응답

### 400 Bad Request - 잘못된 API Key
```json
{
  "status": "error",
  "error_code": "DEFAULT_BAD_REQUEST",
  "message": "잘못된 요청입니다."
}
```

### 400 Bad Request - 잘못된 Instagram ID
```json
{
  "status": "error",
  "error_code": "UTIL_SERVICE_INSTAGRAM_ID_REQUIRED",
  "message": "인스타그램 아이디를 입력해 주세요."
}
```

### 429 Too Many Requests - 파싱 지연
```json
{
  "status": "error",
  "error_code": "UNIVERSAL_RETRY_PARSE_DATA",
  "message": "잠시후 다시 시도해주세요."
}
```

### 500 Internal Server Error
```json
{
  "status": "error",
  "error_code": "INTERNAL_SERVER_ERROR",
  "message": "서버 오류가 발생했습니다."
}
```

---

## 🔧 에러 코드 목록

| 에러 코드 | HTTP 상태 | 설명 | 해결 방법 |
|----------|-----------|------|----------|
| DEFAULT_BAD_REQUEST | 400 | API Key가 유효하지 않음 | API Key 확인 |
| UTIL_SERVICE_INSTAGRAM_ID_REQUIRED | 400 | Instagram ID 형식 오류 | 유효한 username 입력 |
| UNIVERSAL_RETRY_PARSE_DATA | 429 | 파싱 요청 과부하 | 잠시 후 재시도 |
| UTIL_SERVICE_ANALYTICS_ID_NOT_FOUND | 404 | 계정을 찾을 수 없음 | 계정명 확인 |
| INTERNAL_SERVER_ERROR | 500 | 서버 내부 오류 | 관리자 문의 |

---

## 📝 주의사항

1. **API Key 보안**
   - API Key는 절대 공개 저장소나 클라이언트 사이드 코드에 노출하지 마세요
   - 환경 변수나 보안 저장소를 사용하여 관리하세요

2. **Rate Limit**
   - 과도한 요청 시 429 에러가 발생할 수 있습니다
   - 요청 간 적절한 지연(1-2초)을 두는 것을 권장합니다

3. **계정명 입력**
   - Instagram username을 입력해야 합니다 (URL이 아님)
   - 예: `dmaaktdltrptek` (올바름)
   - 예: `https://instagram.com/dmaaktdltrptek` (잘못됨)

4. **응답 언어**
   - 모든 분석 및 추천 메시지는 **일본어**로 제공됩니다
   - `analytics_message`, `recommend_service_message` 필드 참고

5. **데이터 신선도**
   - 파싱 데이터는 실시간으로 Instagram에서 가져옵니다
   - 첫 요청 시 응답 시간이 다소 걸릴 수 있습니다 (최대 30초)
