[phases.setup]
nixPkgs = ['nodejs-18_x']

[phases.install]
cmds = [
  'echo "ğŸ“¦ Installing dependencies..."',
  'npm ci --prefer-offline --no-audit'
]

[phases.build]
cmds = [
  'echo "ğŸ”¨ Building application..."',
  'npm run build',
  'test -f dist/index.js || (echo "âŒ Build failed: dist/index.js not found" && exit 1)',
  'echo "âœ… Build completed"'
]

[start]
cmd = 'node dist/index.js'
